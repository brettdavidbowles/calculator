<!DOCTYPE html>
<html>
    <body>
        
        <div id = 'display'>
            
        </div>
        
<div id = 'calcButt'>
</div>
        <button type = 'button' id = 'num'>1</button>
        <button type = 'button' id = 'num'>2</button>
        <button type = 'button' id = 'num'>3</button>
        <button type = 'button' id = 'op'>+</button><br>
        <button type = 'button' id = 'num'>4</button>
        <button type = 'button' id = 'num'>5</button>
        <button type = 'button' id = 'num'>6</button>
        <button type = 'button' id = 'op'>-</button><br>
        <button type = 'button' id = 'num'>7</button>
        <button type = 'button' id = 'num'>8</button>
        <button type = 'button' id = 'num'>9</button>
        <button type = 'button' id = 'op'>*</button><br>
        <button type = 'button' id = 'num'>0</button>
        <button type = 'button' id = 'equals'>=</button>
        <button type = 'button' id = 'op'>/</button>
        <button type = 'button' id = 'clear'>CE</button><br>
        
<div id = 'answer'>

</div>

        <script>
           const display = document.querySelector('#display');
            
            let displayPar = document.createElement("p");
            
            const zero = document.createTextNode("0");

            let displayValue = "";
            fullValue = "";
            let counter = 0;
            let runningTotal;
            

            const buttons = document.querySelectorAll('#num');
            const clearButt = document.querySelector('#clear');
            const equalButt = document.querySelector('#equals');
            const answer = document.querySelector('#answer');
            let answerPar = document.createElement("p");
            
            for (const button of buttons) {
            button.addEventListener('click', (e) => {
                addToDisplay(button.textContent)
            })
            };

           function addToDisplay (text){
                displayValue = text;
                fullValue += text;
                const textNode = document.createTextNode(displayValue);
                displayPar.appendChild(textNode);
                counter++
            }

            function clearDisplay () {
                for (let i = 0; i < counter; i++){
                    displayPar.removeChild(displayPar.lastChild);
                    fullValue -= fullValue;
                    displayValue -= displayValue;
                }  
            }

            function clearSol () {
                for (let i = 0; i < counter; i++) {
                    answerPar.removeChild(answerPar.lastChild)
                }
            }
            
            clearButt.addEventListener('click', (e) => {
                displayValue -= displayValue
                clearDisplay();
                clearSol();
                counter -= counter;
                valueArray = [];
                opsArray = [];
                runningTotal -= runningTotal;
                })
            
            
            display.appendChild(displayPar);
           
            const ops = document.querySelectorAll('#op');
            let currentOp
            let opsArray = [];
            let valueArray = [];
            let formerSol = 0;



            for (const op of ops) {
                op.addEventListener('click', (e) => {
                    
                    currentOp = op.textContent;
                    opsArray.push(currentOp);
                    
                    valueArray.push(fullValue)
                    
                    fullValue -= fullValue;
                    clearDisplay();
                    counter -= counter;
                })
            }
            
            equalButt.addEventListener('click', (e) => {
                valueArray.push(fullValue);
                orderOfOps(opsArray, valueArray);
                multiOps(opsArray, valueArray);
                const textNode = document.createTextNode(runningTotal);
                answerPar.appendChild(textNode);
                answer.appendChild(answerPar);
                valueArray.splice(0, valueArray.length);
                opsArray.splice(0, opsArray.length);
                fullValue -= fullValue;
                fullValue += runningTotal;
                console.log(runningTotal);
            })
            
            function multiOps (oArr, vArr) {
                runningTotal = Number(vArr[0]);
                for (let i = 0; i < oArr.length; i++) {
                    runningTotal = operate(`${oArr[i]}`, runningTotal, Number(vArr[i+1]))
                }
                return runningTotal
            }


         
function orderOfOps (oArr, vArr) {
  function oneRun(oArr, vArr) {
                for (let i = 0; i <= oArr.length; i++){
                    if ((oArr[i] == '*' || oArr[i] == '/') &&
                       (oArr[i-1] != '*' && oArr[i-1] != '/')){
                       vArr.splice(i, 2, (operate(`${oArr[i]}`, vArr[i], vArr[i+1])));
                      oArr.splice(i, 1);
                      
                    } 
                }
  }
  function check (oArr, vArr) {
   		for (let i = 0; i < oArr.length; i++) {
          if (oArr[i] == '*' || oArr[i] == '/') {
            oneRun(oArr, vArr)
  }
        }
  }
 oneRun(oArr, vArr);
 check (oArr, vArr);
}

 
            

            
            function storeValues(x){
                valueArray.push(x);
            }

            function add(a, b){
                return a + b
            };
            function subtract(a, b){
                return a - b
            };
            function multiply(a, b){
                return a * b
            }
            function divide(a, b){
                if (b == 0){
                        return "Can't divide by zero"
                    } else {
                    return a / b
            }
            }
            
            function operate(op, a, b){
                if (op == '+'){
                    return add(a, b)
                } else if (op == '-'){
                    return subtract(a, b)
                } else if (op == '*'){
                    return multiply(a, b)
                } else if (op == '/'){
                    return divide(a, b)
                }
                
            }
            
        </script>
    </body>

</html>